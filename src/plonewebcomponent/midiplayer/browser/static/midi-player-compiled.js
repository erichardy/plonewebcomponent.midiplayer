function Stream(a){function b(b){var c=a.substr(h,b);return h+=b,c}function c(){var b=(a.charCodeAt(h)<<24)+(a.charCodeAt(h+1)<<16)+(a.charCodeAt(h+2)<<8)+a.charCodeAt(h+3);return h+=4,b}function d(){var b=(a.charCodeAt(h)<<8)+a.charCodeAt(h+1);return h+=2,b}function e(b){var c=a.charCodeAt(h);return b&&c>127&&(c-=256),h+=1,c}function f(){return h>=a.length}function g(){for(var a=0;;){var b=e();if(!(128&b))return a+b;a+=127&b,a<<=7}}var h=0;return{eof:f,read:b,readInt32:c,readInt16:d,readInt8:e,readVarInt:g}}function MidiFile(a){function b(a){var b=a.read(4),c=a.readInt32();return{id:b,length:c,data:a.read(c)}}function c(a){var b={};b.deltaTime=a.readVarInt();var c=a.readInt8();if(240==(240&c)){if(255==c){b.type="meta";var e=a.readInt8(),f=a.readVarInt();switch(e){case 0:if(b.subtype="sequenceNumber",2!=f)throw"Expected length for sequenceNumber event is 2, got "+f;return b.number=a.readInt16(),b;case 1:return b.subtype="text",b.text=a.read(f),b;case 2:return b.subtype="copyrightNotice",b.text=a.read(f),b;case 3:return b.subtype="trackName",b.text=a.read(f),b;case 4:return b.subtype="instrumentName",b.text=a.read(f),b;case 5:return b.subtype="lyrics",b.text=a.read(f),b;case 6:return b.subtype="marker",b.text=a.read(f),b;case 7:return b.subtype="cuePoint",b.text=a.read(f),b;case 32:if(b.subtype="midiChannelPrefix",1!=f)throw"Expected length for midiChannelPrefix event is 1, got "+f;return b.channel=a.readInt8(),b;case 47:if(b.subtype="endOfTrack",0!=f)throw"Expected length for endOfTrack event is 0, got "+f;return b;case 81:if(b.subtype="setTempo",3!=f)throw"Expected length for setTempo event is 3, got "+f;return b.microsecondsPerBeat=(a.readInt8()<<16)+(a.readInt8()<<8)+a.readInt8(),b;case 84:if(b.subtype="smpteOffset",5!=f)throw"Expected length for smpteOffset event is 5, got "+f;var g=a.readInt8();return b.frameRate={0:24,32:25,64:29,96:30}[96&g],b.hour=31&g,b.min=a.readInt8(),b.sec=a.readInt8(),b.frame=a.readInt8(),b.subframe=a.readInt8(),b;case 88:if(b.subtype="timeSignature",4!=f)throw"Expected length for timeSignature event is 4, got "+f;return b.numerator=a.readInt8(),b.denominator=Math.pow(2,a.readInt8()),b.metronome=a.readInt8(),b.thirtyseconds=a.readInt8(),b;case 89:if(b.subtype="keySignature",2!=f)throw"Expected length for keySignature event is 2, got "+f;return b.key=a.readInt8(!0),b.scale=a.readInt8(),b;case 127:return b.subtype="sequencerSpecific",b.data=a.read(f),b;default:return b.subtype="unknown",b.data=a.read(f),b}return b.data=a.read(f),b}if(240==c){b.type="sysEx";var f=a.readVarInt();return b.data=a.read(f),b}if(247==c){b.type="dividedSysEx";var f=a.readVarInt();return b.data=a.read(f),b}throw"Unrecognised MIDI event type byte: "+c}var h;0==(128&c)?(h=c,c=d):(h=a.readInt8(),d=c);var i=c>>4;switch(b.channel=15&c,b.type="channel",i){case 8:return b.subtype="noteOff",b.noteNumber=h,b.velocity=a.readInt8(),b;case 9:return b.noteNumber=h,b.velocity=a.readInt8(),0==b.velocity?b.subtype="noteOff":b.subtype="noteOn",b;case 10:return b.subtype="noteAftertouch",b.noteNumber=h,b.amount=a.readInt8(),b;case 11:return b.subtype="controller",b.controllerType=h,b.value=a.readInt8(),b;case 12:return b.subtype="programChange",b.programNumber=h,b;case 13:return b.subtype="channelAftertouch",b.amount=h,b;case 14:return b.subtype="pitchBend",b.value=h+(a.readInt8()<<7),b;default:throw"Unrecognised MIDI event type: "+i}}var d;stream=Stream(a);var e=b(stream);if("MThd"!=e.id||6!=e.length)throw"Bad .mid file - header not found";var f=Stream(e.data),g=f.readInt16(),h=f.readInt16(),i=f.readInt16();if(32768&i)throw"Expressing time division in SMTPE frames is not supported yet";ticksPerBeat=i;for(var j={formatType:g,trackCount:h,ticksPerBeat:ticksPerBeat},k=[],l=0;l<j.trackCount;l++){k[l]=[];var m=b(stream);if("MTrk"!=m.id)throw"Unexpected chunk - expected MTrk, got "+m.id;for(var n=Stream(m.data);!n.eof();){var o=c(n);k[l].push(o)}}return{header:j,tracks:k}}function Replayer(a,b,c,d){function e(){for(var b=null,c=null,d=null,e=0;e<g.length;e++)null!=g[e].ticksToNextEvent&&(null==b||g[e].ticksToNextEvent<b)&&(b=g[e].ticksToNextEvent,c=e,d=g[e].nextEventIndex);if(null!=c){var f=a.tracks[c][d];a.tracks[c][d+1]?g[c].ticksToNextEvent+=a.tracks[c][d+1].deltaTime:g[c].ticksToNextEvent=null,g[c].nextEventIndex+=1;for(var e=0;e<g.length;e++)null!=g[e].ticksToNextEvent&&(g[e].ticksToNextEvent-=b);return{ticksToEvent:b,event:f,track:c}}return null}function f(){function a(){i||"meta"!=l.event.type||"setTempo"!=l.event.subtype||(h=6e7/l.event.microsecondsPerBeat);var a=0,c=0;l.ticksToEvent>0&&(a=l.ticksToEvent/j,c=a/(h/60));var d=1e3*c*b||0;m.push([l,d]),l=e()}if(l=e())for(;l;)a(!0)}for(var g=[],h=d?d:120,i=!!d,j=a.header.ticksPerBeat,k=0;k<a.tracks.length;k++)g[k]={nextEventIndex:0,ticksToNextEvent:a.tracks[k].length?a.tracks[k][0].deltaTime:null};var l,m=[];return f(),{getData:function(){return clone(m)}}}var Base64Binary={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeArrayBuffer:function(a){var b=Math.ceil(3*a.length/4),c=new ArrayBuffer(b);return this.decode(a,c),c},decode:function(a,b){var c=this._keyStr.indexOf(a.charAt(a.length-1)),d=this._keyStr.indexOf(a.charAt(a.length-1)),e=Math.ceil(3*a.length/4);64==c&&e--,64==d&&e--;var f,g,h,i,j,k,l,m,n=0,o=0;for(f=b?new Uint8Array(b):new Uint8Array(e),a=a.replace(/[^A-Za-z0-9\+\/\=]/g,""),n=0;e>n;n+=3)j=this._keyStr.indexOf(a.charAt(o++)),k=this._keyStr.indexOf(a.charAt(o++)),l=this._keyStr.indexOf(a.charAt(o++)),m=this._keyStr.indexOf(a.charAt(o++)),g=j<<2|k>>4,h=(15&k)<<4|l>>2,i=(3&l)<<6|m,f[n]=g,64!=l&&(f[n+1]=h),64!=m&&(f[n+2]=i);return f}};define("/opt/eh/plonewebcomponent.midiplayer/src/plonewebcomponent/midiplayer/browser/static/js/MIDI.js/inc/shim/Base64binary.js",function(){}),function(a){"use strict";function b(){}function c(){this.inputInUse=!1,this.outputInUse=!1;var a=document.createElement("object");a.id="_Jazz"+Math.random()+"ie",a.classid="CLSID:1ACE1618-1C7D-4561-AEE1-34842AA85E90",this.activeX=a;var b=document.createElement("object");b.id="_Jazz"+Math.random(),b.type="audio/x-jazz",a.appendChild(b),this.objRef=b;var c=document.createElement("p");c.appendChild(document.createTextNode("This page requires the "));var d=document.createElement("a");d.appendChild(document.createTextNode("Jazz plugin")),d.href="http://jazz-soft.net/",c.appendChild(d),c.appendChild(document.createTextNode(".")),b.appendChild(c);var e=document.getElementById("MIDIPlugin");if(!e){var e=document.createElement("div");e.id="MIDIPlugin",e.style.position="absolute",e.style.visibility="hidden",e.style.left="-9999px",e.style.top="-9999px",document.body.appendChild(e)}e.appendChild(a),this.objRef.isJazz?this._Jazz=this.objRef:this.activeX.isJazz?this._Jazz=this.activeX:this._Jazz=null,this._Jazz&&(this._Jazz._jazzTimeZero=this._Jazz.Time(),this._Jazz._perfTimeZero=window.performance.now())}function d(){this._promise&&this._promise.fail({code:1})}function e(){this.jazz.MidiOutLong(this.data)}var f,g,h,i,j,k;b.prototype.then=function(a,b){this.accept=a,this.reject=b},b.prototype.succeed=function(a){this.accept&&this.accept(a)},b.prototype.fail=function(a){this.reject&&this.reject(a)},f=function(){var a=new g;return a._promise},g=function(){this._jazzInstances=new Array,this._jazzInstances.push(new c),this._promise=new b,this._jazzInstances[0]._Jazz?(this._Jazz=this._jazzInstances[0]._Jazz,window.setTimeout(h.bind(this),3)):window.setTimeout(d.bind(this),3)},h=function(){this._promise&&this._promise.succeed(this)},g.prototype.inputs=function(){if(!this._Jazz)return null;for(var a=this._Jazz.MidiInList(),b=new Array(a.length),c=0;c<a.length;c++)b[c]=new i(this,a[c],c);return b},g.prototype.outputs=function(){if(!this._Jazz)return null;for(var a=this._Jazz.MidiOutList(),b=new Array(a.length),c=0;c<a.length;c++)b[c]=new j(this,a[c],c);return b},i=function(a,b,d){this._listeners=[],this._midiAccess=a,this._index=d,this._inLongSysexMessage=!1,this._sysexBuffer=new Uint8Array,this.id=""+d+"."+b,this.manufacturer="",this.name=b,this.type="input",this.version="",this.onmidimessage=null;for(var e=null,f=0;f<a._jazzInstances.length&&!e;f++)a._jazzInstances[f].inputInUse||(e=a._jazzInstances[f]);e||(e=new c,a._jazzInstances.push(e)),e.inputInUse=!0,this._jazzInstance=e._Jazz,this._input=this._jazzInstance.MidiInOpen(this._index,k.bind(this))},i.prototype.addEventListener=function(a,b,c){if("midimessage"===a){for(var d=0;d<this._listeners.length;d++)if(this._listeners[d]==b)return;this._listeners.push(b)}},i.prototype.removeEventListener=function(a,b,c){if("midimessage"===a)for(var d=0;d<this._listeners.length;d++)if(this._listeners[d]==b)return void this._listeners.splice(d,1)},i.prototype.preventDefault=function(){this._pvtDef=!0},i.prototype.dispatchEvent=function(a){this._pvtDef=!1;for(var b=0;b<this._listeners.length;b++)this._listeners[b].handleEvent?this._listeners[b].handleEvent.bind(this)(a):this._listeners[b].bind(this)(a);return this.onmidimessage&&this.onmidimessage(a),this._pvtDef},i.prototype.appendToSysexBuffer=function(a){var b=this._sysexBuffer.length,c=new Uint8Array(b+a.length);c.set(this._sysexBuffer),c.set(a,b),this._sysexBuffer=c},i.prototype.bufferLongSysex=function(a,b){for(var c=b;c<a.length;){if(247==a[c])return c++,this.appendToSysexBuffer(a.slice(b,c)),c;c++}return this.appendToSysexBuffer(a.slice(b,c)),this._inLongSysexMessage=!0,c},k=function(a,b){var c,d=0,e=!1;for(c=0;c<b.length;c+=d){if(this._inLongSysexMessage){if(c=this.bufferLongSysex(b,c),247!=b[c-1])return;e=!0}else switch(e=!1,240&b[c]){case 128:case 144:case 160:case 176:case 224:d=3;break;case 192:case 208:d=2;break;case 240:switch(b[c]){case 240:if(c=this.bufferLongSysex(b,c),247!=b[c-1])return;e=!0;break;case 241:case 243:d=2;break;case 242:d=3;break;default:d=1}}var f=document.createEvent("Event");f.initEvent("midimessage",!1,!1),f.receivedTime=parseFloat(a.toString())+this._jazzInstance._perfTimeZero,e||this._inLongSysexMessage?(f.data=new Uint8Array(this._sysexBuffer),this._sysexBuffer=new Uint8Array(0),this._inLongSysexMessage=!1):f.data=new Uint8Array(b.slice(c,d+c)),this.dispatchEvent(f)}},j=function(a,b,d){this._listeners=[],this._midiAccess=a,this._index=d,this.id=""+d+"."+b,this.manufacturer="",this.name=b,this.type="output",this.version="";for(var e=null,f=0;f<a._jazzInstances.length&&!e;f++)a._jazzInstances[f].outputInUse||(e=a._jazzInstances[f]);e||(e=new c,a._jazzInstances.push(e)),e.outputInUse=!0,this._jazzInstance=e._Jazz,this._jazzInstance.MidiOutOpen(this.name)},j.prototype.send=function(a,b){var c=0;if(0===a.length)return!1;if(b&&(c=Math.floor(b-window.performance.now())),b&&c>1){var d=new Object;d.jazz=this._jazzInstance,d.data=a,window.setTimeout(e.bind(d),c)}else this._jazzInstance.MidiOutLong(a);return!0},window.navigator.requestMIDIAccess||(window.navigator.requestMIDIAccess=f)}(window),function(a){function b(){for(var b=["moz","webkit","o","ms"],c=b.length,d={value:function(a){return function(){return Date.now()-a}}(Date.now())};c>=0;c--)if(b[c]+"Now"in a.performance)return d.value=function(b){return function(){a.performance[b]()}}(b[c]+"Now"),d;return"timing"in a.performance&&"connectStart"in a.performance.timing&&(d.value=function(a){return function(){Date.now()-a}}(a.performance.timing.connectStart)),d}var c,d={};"performance"in a&&"now"in a.performance||("performance"in a||Object.defineProperty(a,"performance",{get:function(){return d}}),c=b(),Object.defineProperty(a.performance,"now",c))}(window),define("/opt/eh/plonewebcomponent.midiplayer/src/plonewebcomponent/midiplayer/browser/static/js/MIDI.js/inc/shim/WebMIDIAPI.js",function(){}),define("/opt/eh/plonewebcomponent.midiplayer/src/plonewebcomponent/midiplayer/browser/static/js/MIDI.js/inc/jasmid/stream.js",function(){}),define("/opt/eh/plonewebcomponent.midiplayer/src/plonewebcomponent/midiplayer/browser/static/js/MIDI.js/inc/jasmid/midifile.js",function(){});var clone=function(a){if("object"!=typeof a)return a;if(null==a)return a;var b="number"==typeof a.length?[]:{};for(var c in a)b[c]=clone(a[c]);return b};if(define("/opt/eh/plonewebcomponent.midiplayer/src/plonewebcomponent/midiplayer/browser/static/js/MIDI.js/inc/jasmid/replayer.js",function(){}),"undefined"==typeof MIDI&&(MIDI={}),function(a){"use strict";var b={},c=0,d=function(a){c++;var d=document.body,e=new Audio,f=a.split(";")[0];e.id="audio",e.setAttribute("preload","auto"),e.setAttribute("audiobuffer",!0),e.addEventListener("error",function(){d.removeChild(e),b[f]=!1,c--},!1),e.addEventListener("canplaythrough",function(){d.removeChild(e),b[f]=!0,c--},!1),e.src="data:"+a,d.appendChild(e)};a.audioDetect=function(a){if(navigator.requestMIDIAccess){var e=Function.prototype.toString.call(navigator.requestMIDIAccess).indexOf("[native code]");if(e)b.webmidi=!0;else for(var f=0;navigator.plugins.length>f;f++){var g=navigator.plugins[f];g.name.indexOf("Jazz-Plugin")>=0&&(b.webmidi=!0)}}if("undefined"==typeof Audio)return a({});b.audiotag=!0,(window.AudioContext||window.webkitAudioContext)&&(b.webaudio=!0);var h=new Audio;if("undefined"==typeof h.canPlayType)return a(b);var i=h.canPlayType('audio/ogg; codecs="vorbis"');i="probably"===i||"maybe"===i;var j=h.canPlayType("audio/mpeg");if(j="probably"===j||"maybe"===j,!i&&!j)return void a(b);i&&d("audio/ogg;base64,T2dnUwACAAAAAAAAAADqnjMlAAAAAOyyzPIBHgF2b3JiaXMAAAAAAUAfAABAHwAAQB8AAEAfAACZAU9nZ1MAAAAAAAAAAAAA6p4zJQEAAAANJGeqCj3//////////5ADdm9yYmlzLQAAAFhpcGguT3JnIGxpYlZvcmJpcyBJIDIwMTAxMTAxIChTY2hhdWZlbnVnZ2V0KQAAAAABBXZvcmJpcw9CQ1YBAAABAAxSFCElGVNKYwiVUlIpBR1jUFtHHWPUOUYhZBBTiEkZpXtPKpVYSsgRUlgpRR1TTFNJlVKWKUUdYxRTSCFT1jFloXMUS4ZJCSVsTa50FkvomWOWMUYdY85aSp1j1jFFHWNSUkmhcxg6ZiVkFDpGxehifDA6laJCKL7H3lLpLYWKW4q91xpT6y2EGEtpwQhhc+211dxKasUYY4wxxsXiUyiC0JBVAAABAABABAFCQ1YBAAoAAMJQDEVRgNCQVQBABgCAABRFcRTHcRxHkiTLAkJDVgEAQAAAAgAAKI7hKJIjSZJkWZZlWZameZaouaov+64u667t6roOhIasBACAAAAYRqF1TCqDEEPKQ4QUY9AzoxBDDEzGHGNONKQMMogzxZAyiFssLqgQBKEhKwKAKAAAwBjEGGIMOeekZFIi55iUTkoDnaPUUcoolRRLjBmlEluJMYLOUeooZZRCjKXFjFKJscRUAABAgAMAQICFUGjIigAgCgCAMAYphZRCjCnmFHOIMeUcgwwxxiBkzinoGJNOSuWck85JiRhjzjEHlXNOSuekctBJyaQTAAAQ4AAAEGAhFBqyIgCIEwAwSJKmWZomipamiaJniqrqiaKqWp5nmp5pqqpnmqpqqqrrmqrqypbnmaZnmqrqmaaqiqbquqaquq6nqrZsuqoum65q267s+rZru77uqapsm6or66bqyrrqyrbuurbtS56nqqKquq5nqq6ruq5uq65r25pqyq6purJtuq4tu7Js664s67pmqq5suqotm64s667s2rYqy7ovuq5uq7Ks+6os+75s67ru2rrwi65r66os674qy74x27bwy7ouHJMnqqqnqq7rmarrqq5r26rr2rqmmq5suq4tm6or26os67Yry7aumaosm64r26bryrIqy77vyrJui67r66Ys67oqy8Lu6roxzLat+6Lr6roqy7qvyrKuu7ru+7JuC7umqrpuyrKvm7Ks+7auC8us27oxuq7vq7It/KosC7+u+8Iy6z5jdF1fV21ZGFbZ9n3d95Vj1nVhWW1b+V1bZ7y+bgy7bvzKrQvLstq2scy6rSyvrxvDLux8W/iVmqratum6um7Ksq/Lui60dd1XRtf1fdW2fV+VZd+3hV9pG8OwjK6r+6os68Jry8ov67qw7MIvLKttK7+r68ow27qw3L6wLL/uC8uq277v6rrStXVluX2fsSu38QsAABhwAAAIMKEMFBqyIgCIEwBAEHIOKQahYgpCCKGkEEIqFWNSMuakZM5JKaWUFEpJrWJMSuaclMwxKaGUlkopqYRSWiqlxBRKaS2l1mJKqcVQSmulpNZKSa2llGJMrcUYMSYlc05K5pyUklJrJZXWMucoZQ5K6iCklEoqraTUYuacpA46Kx2E1EoqMZWUYgupxFZKaq2kFGMrMdXUWo4hpRhLSrGVlFptMdXWWqs1YkxK5pyUzDkqJaXWSiqtZc5J6iC01DkoqaTUYiopxco5SR2ElDLIqJSUWiupxBJSia20FGMpqcXUYq4pxRZDSS2WlFosqcTWYoy1tVRTJ6XFklKMJZUYW6y5ttZqDKXEVkqLsaSUW2sx1xZjjqGkFksrsZWUWmy15dhayzW1VGNKrdYWY40x5ZRrrT2n1mJNMdXaWqy51ZZbzLXnTkprpZQWS0oxttZijTHmHEppraQUWykpxtZara3FXEMpsZXSWiypxNhirLXFVmNqrcYWW62ltVprrb3GVlsurdXcYqw9tZRrrLXmWFNtBQAADDgAAASYUAYKDVkJAEQBAADGMMYYhEYpx5yT0ijlnHNSKucghJBS5hyEEFLKnINQSkuZcxBKSSmUklJqrYVSUmqttQIAAAocAAACbNCUWByg0JCVAEAqAIDBcTRNFFXVdX1fsSxRVFXXlW3jVyxNFFVVdm1b+DVRVFXXtW3bFn5NFFVVdmXZtoWiqrqybduybgvDqKqua9uybeuorqvbuq3bui9UXVmWbVu3dR3XtnXd9nVd+Bmzbeu2buu+8CMMR9/4IeTj+3RCCAAAT3AAACqwYXWEk6KxwEJDVgIAGQAAgDFKGYUYM0gxphhjTDHGmAAAgAEHAIAAE8pAoSErAoAoAADAOeecc84555xzzjnnnHPOOeecc44xxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY0wAwE6EA8BOhIVQaMhKACAcAABACCEpKaWUUkoRU85BSSmllFKqFIOMSkoppZRSpBR1lFJKKaWUIqWgpJJSSimllElJKaWUUkoppYw6SimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaVUSimllFJKKaWUUkoppRQAYPLgAACVYOMMK0lnhaPBhYasBAByAwAAhRiDEEJpraRUUkolVc5BKCWUlEpKKZWUUqqYgxBKKqmlklJKKbXSQSihlFBKKSWUUkooJYQQSgmhlFRCK6mEUkoHoYQSQimhhFRKKSWUzkEoIYUOQkmllNRCSB10VFIpIZVSSiklpZQ6CKGUklJLLZVSWkqpdBJSKamV1FJqqbWSUgmhpFZKSSWl0lpJJbUSSkklpZRSSymFVFJJJYSSUioltZZaSqm11lJIqZWUUkqppdRSSiWlkEpKqZSSUmollZRSaiGVlEpJKaTUSimlpFRCSamlUlpKLbWUSkmptFRSSaWUlEpJKaVSSksppRJKSqmllFpJKYWSUkoplZJSSyW1VEoKJaWUUkmptJRSSymVklIBAEAHDgAAAUZUWoidZlx5BI4oZJiAAgAAQABAgAkgMEBQMApBgDACAQAAAADAAAAfAABHARAR0ZzBAUKCwgJDg8MDAAAAAAAAAAAAAACAT2dnUwAEAAAAAAAAAADqnjMlAgAAADzQPmcBAQA="),j&&d("audio/mpeg;base64,/+MYxAAAAANIAUAAAASEEB/jwOFM/0MM/90b/+RhST//w4NFwOjf///PZu////9lns5GFDv//l9GlUIEEIAAAgIg8Ir/JGq3/+MYxDsLIj5QMYcoAP0dv9HIjUcH//yYSg+CIbkGP//8w0bLVjUP///3Z0x5QCAv/yLjwtGKTEFNRTMuOTeqqqqqqqqqqqqq/+MYxEkNmdJkUYc4AKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq");var k=(new Date).getTime(),l=window.setInterval(function(){var d=(new Date).getTime(),e=d-k>5e3;c&&!e||(window.clearInterval(l),a(b))},1)}}(MIDI),define("/opt/eh/plonewebcomponent.midiplayer/src/plonewebcomponent/midiplayer/browser/static/js/MIDI.js/js/midi/audioDetect.js",function(){}),function(a){"use strict";a.GM=function(a){var b=function(a){return a.replace(/[^a-z0-9 ]/gi,"").replace(/[ ]/g,"_").toLowerCase()},c={byName:{},byId:{},byCategory:{}};for(var d in a)for(var e=a[d],f=0,g=e.length;g>f;f++){var h=e[f];if(h){var i=parseInt(h.substr(0,h.indexOf(" ")),10);h=h.replace(i+" ",""),c.byId[--i]=c.byName[b(h)]=c.byCategory[b(d)]={id:b(h),instrument:h,number:i,category:d}}}return c}({Piano:["1 Acoustic Grand Piano","2 Bright Acoustic Piano","3 Electric Grand Piano","4 Honky-tonk Piano","5 Electric Piano 1","6 Electric Piano 2","7 Harpsichord","8 Clavinet"],"Chromatic Percussion":["9 Celesta","10 Glockenspiel","11 Music Box","12 Vibraphone","13 Marimba","14 Xylophone","15 Tubular Bells","16 Dulcimer"],Organ:["17 Drawbar Organ","18 Percussive Organ","19 Rock Organ","20 Church Organ","21 Reed Organ","22 Accordion","23 Harmonica","24 Tango Accordion"],Guitar:["25 Acoustic Guitar (nylon)","26 Acoustic Guitar (steel)","27 Electric Guitar (jazz)","28 Electric Guitar (clean)","29 Electric Guitar (muted)","30 Overdriven Guitar","31 Distortion Guitar","32 Guitar Harmonics"],Bass:["33 Acoustic Bass","34 Electric Bass (finger)","35 Electric Bass (pick)","36 Fretless Bass","37 Slap Bass 1","38 Slap Bass 2","39 Synth Bass 1","40 Synth Bass 2"],Strings:["41 Violin","42 Viola","43 Cello","44 Contrabass","45 Tremolo Strings","46 Pizzicato Strings","47 Orchestral Harp","48 Timpani"],Ensemble:["49 String Ensemble 1","50 String Ensemble 2","51 Synth Strings 1","52 Synth Strings 2","53 Choir Aahs","54 Voice Oohs","55 Synth Choir","56 Orchestra Hit"],Brass:["57 Trumpet","58 Trombone","59 Tuba","60 Muted Trumpet","61 French Horn","62 Brass Section","63 Synth Brass 1","64 Synth Brass 2"],Reed:["65 Soprano Sax","66 Alto Sax","67 Tenor Sax","68 Baritone Sax","69 Oboe","70 English Horn","71 Bassoon","72 Clarinet"],Pipe:["73 Piccolo","74 Flute","75 Recorder","76 Pan Flute","77 Blown Bottle","78 Shakuhachi","79 Whistle","80 Ocarina"],"Synth Lead":["81 Lead 1 (square)","82 Lead 2 (sawtooth)","83 Lead 3 (calliope)","84 Lead 4 (chiff)","85 Lead 5 (charang)","86 Lead 6 (voice)","87 Lead 7 (fifths)","88 Lead 8 (bass + lead)"],"Synth Pad":["89 Pad 1 (new age)","90 Pad 2 (warm)","91 Pad 3 (polysynth)","92 Pad 4 (choir)","93 Pad 5 (bowed)","94 Pad 6 (metallic)","95 Pad 7 (halo)","96 Pad 8 (sweep)"],"Synth Effects":["97 FX 1 (rain)","98 FX 2 (soundtrack)","99 FX 3 (crystal)","100 FX 4 (atmosphere)","101 FX 5 (brightness)","102 FX 6 (goblins)","103 FX 7 (echoes)","104 FX 8 (sci-fi)"],Ethnic:["105 Sitar","106 Banjo","107 Shamisen","108 Koto","109 Kalimba","110 Bagpipe","111 Fiddle","112 Shanai"],Percussive:["113 Tinkle Bell","114 Agogo","115 Steel Drums","116 Woodblock","117 Taiko Drum","118 Melodic Tom","119 Synth Drum"],"Sound effects":["120 Reverse Cymbal","121 Guitar Fret Noise","122 Breath Noise","123 Seashore","124 Bird Tweet","125 Telephone Ring","126 Helicopter","127 Applause","128 Gunshot"]}),a.getInstrument=function(b){var c=a.channels[b];return c&&c.instrument},a.setInstrument=function(b,c,d){var e=a.channels[b];return d?setTimeout(function(){e.instrument=c},d):void(e.instrument=c)},a.getMono=function(b){var c=a.channels[b];return c&&c.mono},a.setMono=function(b,c,d){var e=a.channels[b];return d?setTimeout(function(){e.mono=c},d):void(e.mono=c)},a.getOmni=function(b){var c=a.channels[b];return c&&c.omni},a.setOmni=function(b,c){var d=a.channels[b];return delay?setTimeout(function(){d.omni=c},delay):void(d.omni=c)},a.getSolo=function(b){var c=a.channels[b];return c&&c.solo},a.setSolo=function(b,c){var d=a.channels[b];return delay?setTimeout(function(){d.solo=c},delay):void(d.solo=c)},a.channels=function(){for(var a={},b=0;16>b;b++)a[b]={instrument:b,pitchBend:0,mute:!1,mono:!1,omni:!1,solo:!1};return a}(),a.keyToNote={},a.noteToKey={},function(){for(var b=21,c=108,d=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],e=b;c>=e;e++){var f=(e-12)/12>>0,g=d[e%12]+f;a.keyToNote[g]=e,a.noteToKey[e]=g}}()}(MIDI),define("/opt/eh/plonewebcomponent.midiplayer/src/plonewebcomponent/midiplayer/browser/static/js/MIDI.js/js/midi/gm.js",function(){}),"undefined"==typeof MIDI&&(MIDI={}),MIDI.Soundfont=MIDI.Soundfont||{},MIDI.Player=MIDI.Player||{},function(a){"use strict";a.DEBUG=!0,a.USE_XHR=!0,a.soundfontUrl="./soundfont/",a.loadPlugin=function(c){"function"==typeof c&&(c={onsuccess:c}),a.soundfontUrl=c.soundfontUrl||a.soundfontUrl,a.audioDetect(function(d){var e=window.location.hash,f="";if(d[c.api]?f=c.api:d[e.substr(1)]?f=e.substr(1):d.webmidi?f="webmidi":window.AudioContext?f="webaudio":window.Audio&&(f="audiotag"),b[f]){if(c.targetFormat)var g=c.targetFormat;else var g=d["audio/ogg"]?"ogg":"mp3";a.__api=f,a.__audioFormat=g,a.supports=d,a.loadResource(c)}})},a.loadResource=function(c){var d=c.instruments||c.instrument||"acoustic_grand_piano";"object"!=typeof d&&(d=d||0===d?[d]:[]);for(var e=0;e<d.length;e++){var f=d[e];f===+f&&a.GM.byId[f]&&(d[e]=a.GM.byId[f].id)}c.format=a.__audioFormat,c.instruments=d,b[a.__api](c)};var b={webmidi:function(b){a.WebMIDI.connect(b)},audiotag:function(a){c(a,"AudioTag")},webaudio:function(a){c(a,"WebAudio")}},c=function(b,c){for(var e=b.format,f=b.instruments,g=b.onprogress,h=b.onerror,i=f.length,j=i,k=function(){--j||(g&&g("load",1),a[c].connect(b))},l=0;i>l;l++){var m=f[l];MIDI.Soundfont[m]?k():d(f[l],e,function(a,b){var c=b/i,d=(i-j)/i;g&&g("load",c+d,m)},function(){k()},h)}},d=function(b,c,d,e,f){var g=a.soundfontUrl+b+"-"+c+".js";a.USE_XHR?a.util.request({url:g,format:"text",onerror:f,onprogress:d,onsuccess:function(a,b){var c=document.createElement("script");c.language="javascript",c.type="text/javascript",c.text=b,document.body.appendChild(c),e()}}):dom.loadScript.add({url:g,verify:'MIDI.Soundfont["'+b+'"]',onerror:f,onsuccess:function(){e()}})};a.setDefaultPlugin=function(b){for(var c in b)a[c]=b[c]}}(MIDI),define("/opt/eh/plonewebcomponent.midiplayer/src/plonewebcomponent/midiplayer/browser/static/js/MIDI.js/js/midi/loader.js",function(){}),function(a){"use strict";window.AudioContext&&function(){function b(a,b,c){if(e){var f=new Audio;f.src=a,f.controls=!1,f.autoplay=!1,f.preload=!1,f.addEventListener("canplay",function(){b&&b(f)}),f.addEventListener("error",function(a){c&&c(a)}),document.body.appendChild(f)}else if(0===a.indexOf("data:audio")){var g=a.split(",")[1],h=Base64Binary.decodeArrayBuffer(g);d.decodeAudioData(h,b,c)}else{var i=new XMLHttpRequest;i.open("GET",a,!0),i.responseType="arraybuffer",i.onload=function(){d.decodeAudioData(i.response,b,c)},i.send()}}function c(){return new(window.AudioContext||window.webkitAudioContext)}var d,e=!1,f=a.WebAudio={api:"webaudio"},g={},h={},i=127,j={};f.audioBuffers=j,f.send=function(a,b){},f.setController=function(a,b,c,d){},f.setVolume=function(a,b,c){c?setTimeout(function(){i=b},1e3*c):i=b},f.programChange=function(b,c,d){var e=a.channels[b];e.instrument=c},f.pitchBend=function(b,c,d){var e=a.channels[b];e.pitchBend=c},f.noteOn=function(b,c,f,k){k=k||0;var l=a.channels[b],m=l.instrument,n=m+""+c,o=j[n];if(o){if(k<d.currentTime&&(k+=d.currentTime),e)var p=d.createMediaElementSource(o);else{var p=d.createBufferSource();p.buffer=o}if(h){var q=p;for(var r in h)q.connect(h[r].input),q=h[r]}var s=f/127*(i/127)*2-1;if(p.connect(d.destination),p.playbackRate.value=1,p.gainNode=d.createGain(),p.gainNode.connect(d.destination),p.gainNode.gain.value=Math.min(1,Math.max(-1,s)),p.connect(p.gainNode),e){if(k)return setTimeout(function(){o.currentTime=0,o.play()},1e3*k);o.currentTime=0,o.play()}else p.start(k||0);return g[b+""+c]=p,p}},f.noteOff=function(b,c,f){f=f||0;var h=a.channels[b],i=h.instrument,k=i+""+c,l=j[k];if(l){f<d.currentTime&&(f+=d.currentTime);var m=g[b+""+c];if(m){if(m.gainNode){var n=m.gainNode.gain;n.linearRampToValueAtTime(n.value,f),n.linearRampToValueAtTime(-1,f+.3)}return e?f?setTimeout(function(){l.pause()},1e3*f):l.pause():m.noteOff?m.noteOff(f+.5):m.stop(f+.5),delete g[b+""+c],m}}},f.chordOn=function(a,b,c,d){for(var e,g={},h=0,i=b.length;i>h;h++)g[e=b[h]]=f.noteOn(a,e,c,d);return g},f.chordOff=function(a,b,c){for(var d,e={},g=0,h=b.length;h>g;g++)e[d=b[g]]=f.noteOff(a,d,c);return e},f.stopAllNotes=function(){for(var a in g){var b=0;b<d.currentTime&&(b+=d.currentTime);var c=g[a];c.gain.linearRampToValueAtTime(1,b),c.gain.linearRampToValueAtTime(0,b+.3),c.noteOff?c.noteOff(b+.3):c.stop(b+.3),delete g[a]}},f.setEffects=function(a){if(!d.tunajs)return console.log("Effects module not installed.");for(var b=0;b<a.length;b++){var c=a[b],e=new d.tunajs[c.type](c);e.connect(d.destination),h[c.type]=e}},f.connect=function(b){a.setDefaultPlugin(f),f.setContext(d||c(),b.onsuccess)},f.getContext=function(){return d},f.setContext=function(c,e,f,g){d=c,"undefined"==typeof Tuna||d.tunajs||(d.tunajs=new Tuna(d));var h=[],i=a.keyToNote;for(var k in i)h.push(k);var l=function(a){for(var b in n)if(n[b])return;e&&(e(),e=null)},m=function(c,d,e,f){var g=c[f];g&&(n[d]++,b(g,function(b){b.id=f;var e=a.keyToNote[f];if(j[d+""+e]=b,0===--n[d]){c.isLoaded=!0,l(o)}},function(a){}))},n={};for(var o in a.Soundfont){var p=a.Soundfont[o];if(!p.isLoaded){var q=a.GM.byName[o],r=q.number;n[r]=0;for(var s=0;s<h.length;s++){var k=h[s];m(p,r,s,k)}}}setTimeout(l,1)}}()}(MIDI),define("/opt/eh/plonewebcomponent.midiplayer/src/plonewebcomponent/midiplayer/browser/static/js/MIDI.js/js/midi/plugin.webaudio.js",function(){}),function(a){"use strict";var b=null,c=null,d=a.WebMIDI={api:"webmidi"};d.send=function(a,b){c.send(a,1e3*b)},d.setController=function(a,b,d,e){c.send([a,b,d],1e3*e)},d.setVolume=function(a,b,d){c.send([176+a,7,b],1e3*d)},d.programChange=function(a,b,d){c.send([192+a,b],1e3*d)},d.pitchBend=function(a,b,d){c.send([224+a,b],1e3*d)},d.noteOn=function(a,b,d,e){c.send([144+a,b,d],1e3*e)},d.noteOff=function(a,b,d){c.send([128+a,b,0],1e3*d)},d.chordOn=function(a,b,d,e){for(var f=0;f<b.length;f++){var g=b[f];c.send([144+a,g,d],1e3*e)}},d.chordOff=function(a,b,d){for(var e=0;e<b.length;e++){var f=b[e];c.send([128+a,f,0],1e3*d)}},d.stopAllNotes=function(){c.cancel();for(var a=0;16>a;a++)c.send([176+a,123,0])},d.connect=function(e){a.setDefaultPlugin(d);var f=function(b){if(window.AudioContext)e.api="webaudio";else{if(!window.Audio)return;e.api="audiotag"}a.loadPlugin(e)};navigator.requestMIDIAccess().then(function(a){b=a;var d=b.outputs;c="function"==typeof d?d()[0]:d[0],void 0===c?f():e.onsuccess&&e.onsuccess()},f)}}(MIDI),define("/opt/eh/plonewebcomponent.midiplayer/src/plonewebcomponent/midiplayer/browser/static/js/MIDI.js/js/midi/plugin.webmidi.js",function(){}),"undefined"==typeof MIDI&&(MIDI={}),"undefined"==typeof MIDI.Player&&(MIDI.Player={}),function(){"use strict";var a=MIDI.Player;a.currentTime=0,a.endTime=0,a.restart=0,a.playing=!1,a.timeWarp=1,a.startDelay=0,a.BPM=120,a.start=a.resume=function(b){a.currentTime<-1&&(a.currentTime=-1),l(a.currentTime,null,b)},a.pause=function(){var b=a.restart;m(),a.restart=b},a.stop=function(){m(),a.restart=0,a.currentTime=0},a.addListener=function(a){g=a},a.removeListener=function(){g=void 0},a.clearAnimation=function(){a.animationFrameId&&cancelAnimationFrame(a.animationFrameId)},a.setAnimation=function(b){var c=0,d=0,e=0;a.clearAnimation();var g=function(){if(a.animationFrameId=requestAnimationFrame(g),0!==a.endTime){a.playing?(c=e===a.currentTime?d-Date.now():0,c=0===a.currentTime?0:a.currentTime-c,e!==a.currentTime&&(d=Date.now(),e=a.currentTime)):c=a.currentTime;var h=a.endTime,i=c/1e3,j=i/60,k=i-60*j,l=60*j+k,m=h/1e3;-1>m-l||b({now:l,end:m,events:f})}};requestAnimationFrame(g)},a.loadMidiFile=function(b,c,d){try{a.replayer=new Replayer(MidiFile(a.currentData),a.timeWarp,null,a.BPM),a.data=a.replayer.getData(),a.endTime=j(),MIDI.loadPlugin({onsuccess:b,onprogress:c,onerror:d})}catch(e){d&&d(e)}},a.loadFile=function(b,c,d,e){if(a.stop(),-1!==b.indexOf("base64,")){var f=window.atob(b.split(",")[1]);a.currentData=f,a.loadMidiFile(c,d,e)}else{var g=new XMLHttpRequest;g.open("GET",b),g.overrideMimeType("text/plain; charset=x-user-defined"),g.onreadystatechange=function(){if(4===this.readyState)if(200===this.status){for(var b=this.responseText||"",f=[],g=b.length,h=String.fromCharCode,i=0;g>i;i++)f[i]=h(255&b.charCodeAt(i));var j=f.join("");a.currentData=j,a.loadMidiFile(c,d,e)}else e&&e("Unable to load MIDI file")},g.send()}},a.getFileInstruments=function(){for(var b={},c={},d=0;d<a.data.length;d++){var e=a.data[d][0].event;if("channel"===e.type){var f=e.channel;switch(e.subtype){case"controller":break;case"programChange":c[f]=e.programNumber;break;case"noteOn":var g=c[f],h=MIDI.GM.byId[isFinite(g)?g:f];b[h.id]=!0}}}var i=[];for(var j in b)i.push(j);return i};var b,c,d=[],e=0,f={},g=void 0,h=function(c,e,h,i,j,k,m){return setTimeout(function(){var i={channel:c,note:e,now:h,end:a.endTime,message:j,velocity:k};128===j?delete f[e]:f[e]=i,g&&g(i),a.currentTime=h,d.shift(),d.length<1e3?l(b,!0):a.currentTime===b&&b<a.endTime&&l(b,!0)},h-i)},i=function(){return"webaudio"===MIDI.api?MIDI.WebAudio.getContext():(a.ctx={currentTime:0},a.ctx)},j=function(){for(var b=a.data,c=b.length,d=.5,e=0;c>e;e++)d+=b[e][1];return d},k=function(){return window.performance&&window.performance.now?window.performance.now():Date.now()},l=function(f,g,l){if(a.replayer){g||("undefined"==typeof f&&(f=a.restart),a.playing&&m(),a.playing=!0,a.data=a.replayer.getData(),a.endTime=j());var n,o=0,p=0,q=a.data,r=i(),s=q.length;b=.5;var t=(d[0]&&d[0].interval||0,f-a.currentTime);if("webaudio"!==MIDI.api){var u=k();c=c||u,r.currentTime=(u-c)/1e3}e=r.currentTime;for(var v=0;s>v&&100>p;v++){var w=q[v];if((b+=w[1])<=f)o=b;else{f=b-o;var x=w[0].event;if("channel"===x.type){var y=x.channel,z=MIDI.channels[y],A=r.currentTime+(f+t+a.startDelay)/1e3,B=b-o+a.startDelay;switch(x.subtype){case"controller":MIDI.setController(y,x.controllerType,x.value,A);break;case"programChange":MIDI.programChange(y,x.programNumber,A);break;case"pitchBend":MIDI.pitchBend(y,x.value,A);break;case"noteOn":if(z.mute)break;n=x.noteNumber-(a.MIDIOffset||0),d.push({event:x,time:B,source:MIDI.noteOn(y,x.noteNumber,x.velocity,A),interval:h(y,n,b+a.startDelay,o-t,144,x.velocity)}),p++;break;case"noteOff":if(z.mute)break;n=x.noteNumber-(a.MIDIOffset||0),d.push({event:x,time:B,source:MIDI.noteOff(y,x.noteNumber,A),interval:h(y,n,b,o-t,128,0)})}}}}l&&l(d)}},m=function(){var b=i();for(a.playing=!1,a.restart+=1e3*(b.currentTime-e);d.length;){var c=d.pop();window.clearInterval(c.interval),c.source&&("number"==typeof c.source?window.clearTimeout(c.source):c.source.disconnect(0))}for(var h in f){var c=f[h];144===f[h].message&&g&&g({channel:c.channel,note:c.note,now:c.now,end:c.end,message:128,velocity:c.velocity})}f={}}}(),define("/opt/eh/plonewebcomponent.midiplayer/src/plonewebcomponent/midiplayer/browser/static/js/MIDI.js/js/midi/player.js",function(){}),"undefined"==typeof MIDI&&(MIDI={}),function(a){var b=a.util||(a.util={});if(b.request=function(b,d,e,f){"use strict";"string"==typeof b&&(b={url:b});var g=b.data,h=b.url,i=b.method||(b.data?"POST":"GET"),j=b.format,k=b.headers,l=b.responseType,m=b.withCredentials||!1,d=d||b.onsuccess,e=e||b.onerror,f=f||b.onprogress;
if("undefined"!=typeof c&&a.loc.isLocalUrl(h))return void c.readFile(h,"utf8",function(a,b){a?e&&e(a):d&&d({responseText:b})});var n=new XMLHttpRequest;if(n.open(i,h,!0),k)for(var o in k)n.setRequestHeader(o,k[o]);else g&&n.setRequestHeader("Content-type","application/x-www-form-urlencoded");return"binary"===j&&n.overrideMimeType&&n.overrideMimeType("text/plain; charset=x-user-defined"),l&&(n.responseType=l),m&&(n.withCredentials="true"),e&&"onerror"in n&&(n.onerror=e),f&&n.upload&&"onprogress"in n.upload&&(g?n.upload.onprogress=function(a){f.call(n,a,event.loaded/event.total)}:n.addEventListener("progress",function(a){var b=0;if(a.lengthComputable)b=a.total;else if(n.totalBytes)b=n.totalBytes;else{var c=parseInt(n.getResponseHeader("Content-Length-Raw"));if(!isFinite(c))return;n.totalBytes=b=c}f.call(n,a,a.loaded/b)})),n.onreadystatechange=function(b){if(4===n.readyState)if(200===n.status||304===n.status||308===n.status||0===n.status&&a.client.cordova){if(d){var c;if("xml"===j)c=b.target.responseXML;else if("text"===j)c=b.target.responseText;else if("json"===j)try{c=JSON.parse(b.target.response)}catch(f){e&&e.call(n,b)}d.call(n,b,c)}}else e&&e.call(n,b)},n.send(g),n},"undefined"!=typeof module&&module.exports){var c=require("fs");XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest,module.exports=a.util.request}}(MIDI),define("/opt/eh/plonewebcomponent.midiplayer/src/plonewebcomponent/midiplayer/browser/static/js/MIDI.js/js/util/dom_request_xhr.js",function(){}),"undefined"==typeof dom)var dom={};if(function(){"use strict";dom.loadScript=function(){return this.loaded={},this.loading={},this},dom.loadScript.prototype.add=function(b){var c=this;"string"==typeof b&&(b={url:b});var d=b.urls;"undefined"==typeof d&&(d=[{url:b.url,verify:b.verify}]);var e=document.getElementsByTagName("head")[0],f=function(b,d){c.loaded[b.url]||d&&a(d)===!1||(c.loaded[b.url]=!0,c.loading[b.url]&&c.loading[b.url](),delete c.loading[b.url],b.onsuccess&&b.onsuccess(),"undefined"!=typeof m&&m())},g=!1,h=[],i=function(a){if("string"==typeof a&&(a={url:a,verify:b.verify}),/([\w\d.\[\]\'\"])$/.test(a.verify)){var d=a.test=a.verify;if("object"==typeof d)for(var i=0;i<d.length;i++)h.push(d[i]);else h.push(d)}if(!c.loaded[a.url]){var k=document.createElement("script");k.onreadystatechange=function(){"loaded"!==this.readyState&&"complete"!==this.readyState||f(a)},k.onload=function(){f(a)},k.onerror=function(){if(g=!0,delete c.loading[a.url],"object"==typeof a.test)for(var b in a.test)j(a.test[b]);else j(a.test)},k.setAttribute("type","text/javascript"),k.setAttribute("src",a.url),e.appendChild(k),c.loading[a.url]=function(){}}},j=function(a){for(var b=[],c=0;c<h.length;c++)h[c]!==a&&b.push(h[c]);h=b},k=function(c){if(c)f(c,c.test);else for(var e=0;e<d.length;e++)f(d[e],d[e].test);for(var i=!0,e=0;e<h.length;e++)a(h[e])===!1&&(i=!1);!b.strictOrder&&i?g?b.error&&b.error():b.onsuccess&&b.onsuccess():setTimeout(function(){k(c)},10)};if(b.strictOrder){var l=-1,m=function(){if(l++,d[l]){var a=d[l],e=a.url;c.loading[e]?c.loading[e]=function(){a.onsuccess&&a.onsuccess(),m()}:c.loaded[e]?m():(i(a),k(a))}else g?b.error&&b.error():b.onsuccess&&b.onsuccess()};m()}else for(var l=0;l<d.length;l++)i(d[l]),k(d[l])},dom.loadScript=new dom.loadScript;var a=function(a,b){try{a=a.split('"').join("").split("'").join("").split("]").join("").split("[").join(".");for(var c=a.split("."),d=c.length,e=b||window,f=0;d>f;f++){var g=c[f];if(null==e[g])return!1;e=e[g]}return!0}catch(h){return!1}}}(),"undefined"!=typeof module&&module.exports&&(module.exports=dom.loadScript),define("/opt/eh/plonewebcomponent.midiplayer/src/plonewebcomponent/midiplayer/browser/static/js/MIDI.js/js/util/dom_request_script.js",function(){}),"undefined"==typeof sketch&&(sketch={}),function(a){"use strict";a.ui=a.ui||{},a.ui.Timer=function(a){a=a||{};var c,d,e,f,g,h,i=this,j=180/Math.PI,k=1/j,l=function(a){c=a.size||120,d=a.format||"percent",e=a.container||document.body,f=a.endValue,g=a.value||0},m=function(){if("percent"===d)return{value:g,format:"PERCENT",percent:g/100};if("time"===d){var a=(Date.now()-p)/1e3,b=f-a,c=a/f,e=Math.max(0,Math.round(b)),h=e/3600>>0,i=(e-3600*h)/60>>0,j=e-3600*h-60*i;return 10>j&&i&&(j="0"+j),i?{value:i,format:"MINUTES",percent:c}:{value:j,format:"SECONDS",percent:c}}},n=["#9cdb7d","#99d97f","#97d782","#95d684","#93d487","#91d38a","#8fd18c","#8dcf8f","#8bce91","#89cc94","#87cb97","#85c999","#83c89c","#81c69e","#7fc4a1","#7dc3a4","#7bc1a6","#79c0a9","#77beab","#75bcae","#73bbb1","#71b9b3","#6fb8b6","#6db6b8","#6bb5bb","#69b3be","#67b1c0","#65b0c3","#63aec5","#61adc8","#5fabcb","#5daacd","#5ba8d0","#59a6d2","#57a5d5","#55a3d8","#53a2da","#51a0dd","#4f9edf","#4d9de2","#4b9be5","#499ae7","#4798ea","#4597ec","#4395ef","#4193f2","#3f92f4","#3d90f7","#3b8ff9","#398dfc","#378cff"],o=0,p=Date.now(),q=function(){var a=m();s.fillStyle=n[Math.round(50*(1-a.percent))];var b=-360*k,d=360*a.percent*k,e=c/2+o%20,f=c/2*.61+o%20;s.clearRect(0,0,r.width,r.height),s.save(),s.beginPath(),s.arc(e,e,e,b,d,!1),s.arc(e,e,f,d,b,!0),s.globalAlpha=.25,s.fill(),b+=360*k,s.beginPath(),s.arc(e,e,e,b,d,!1),s.arc(e,e,f,d,b,!0),s.globalAlpha=1,s.fill();var g=c/260,i=26*g,j='"Trebuchet MS", Arial, Helvetica, sans-serif';s.font="bold "+i+"px "+j,s.textBaseline="top",s.textAlign="center",s.fillText(a.format,e,e+14*g);var i=46*g;s.font="bold "+i+"px "+j,s.fillStyle="#ffffff",s.fillText(a.value,e,e-44*g),s.restore(),a.percent<1&&(h=requestAnimationFrame(q))};l(a);var r=document.createElement("canvas"),s=r.getContext("2d");r.width=c,r.height=c;var t=document.createElement("div");return t.style.display="none",t.className="sk-timer",t.appendChild(r),e.appendChild(t),a.onstart&&setTimeout(a.onstart,250),i.reset=function(){l(a)},i.destroy=function(){e.removeChild(r)},i.hidden=!1,i.hide=function(a){cancelAnimationFrame(h),i.hidden=!0,t.style.transition="opacity .35s",t.style.opacity=0,setTimeout(function(){t.style.display="none",a&&a()},350)},i.setValue=function(a){cancelAnimationFrame(h),i.hidden=!1,t.style.display="block",t.style.opacity=1,(g=Math.ceil(a))>=100&&i.hide(),q()},b(),i};var b=function(){if(null==document.getElementById("sk-timer-stylesheet")){var a=document.createElement("style");a.id="sk-timer-stylesheet",a.innerHTML=".sk-timer {				position: absolute;				z-index: 1000;				top: 0;				left: 0;				width: 100%;				height: 100%;			}			.sk-timer canvas {				border: 3px solid #000;				border-radius: 50%;				background: #000;				margin: auto;				position: absolute;				top: 0;				left: 0;				right: 0;				bottom: 0;			}		",document.head.appendChild(a)}}}(sketch),define("/opt/eh/plonewebcomponent.midiplayer/src/plonewebcomponent/midiplayer/browser/static/js/MIDI.js/examples/inc/timer.js",function(){}),"undefined"==typeof Color)var Color={};if("undefined"==typeof Color.Space&&(Color.Space={}),function(){"use strict";var useEval=!1,functions={},shortcuts={"HEX24>HSL":"HEX24>RGB>HSL","HEX32>HSLA":"HEX32>RGBA>HSLA","HEX24>CMYK":"HEX24>RGB>CMY>CMYK","RGB>CMYK":"RGB>CMY>CMYK"},root=Color.Space=function(color,route){shortcuts[route]&&(route=shortcuts[route]);var r=route.split(">");if("object"==typeof color&&color[0]>=0){for(var type=r[0],tmp={},i=0;i<type.length;i++){var str=type.substr(i,1);tmp[str]=color[i]}color=tmp}if(functions[route])return functions[route](color);for(var f="color",pos=1,key=r[0];pos<r.length;pos++)pos>1&&(key=key.substr(key.indexOf("_")+1)),key+=(0===pos?"":"_")+r[pos],color=root[key](color),useEval&&(f="Color.Space."+key+"("+f+")");return useEval&&(functions[route]=eval("(function(color) { return "+f+" })")),color};root.RGB_W3=function(a){return"rgb("+(a.R>>0)+","+(a.G>>0)+","+(a.B>>0)+")"},root.RGBA_W3=function(a){var b="number"==typeof a.A?a.A/255:1;return"rgba("+(a.R>>0)+","+(a.G>>0)+","+(a.B>>0)+","+b+")"},root.W3_RGB=function(a){var a=a.substr(4,a.length-5).split(",");return{R:parseInt(a[0]),G:parseInt(a[1]),B:parseInt(a[2])}},root.W3_RGBA=function(a){var a=a.substr(5,a.length-6).split(",");return{R:parseInt(a[0]),G:parseInt(a[1]),B:parseInt(a[2]),A:255*parseFloat(a[3])}},root.HSL_W3=function(a){return"hsl("+(a.H+.5>>0)+","+(a.S+.5>>0)+"%,"+(a.L+.5>>0)+"%)"},root.HSLA_W3=function(a){var b="number"==typeof a.A?a.A/255:1;return"hsla("+(a.H+.5>>0)+","+(a.S+.5>>0)+"%,"+(a.L+.5>>0)+"%,"+b+")"},root.W3_HSL=function(a){var a=a.substr(4,a.length-5).split(",");return{H:parseInt(a[0]),S:parseInt(a[1]),L:parseInt(a[2])}},root.W3_HSLA=function(a){var a=a.substr(5,a.length-6).split(",");return{H:parseInt(a[0]),S:parseInt(a[1]),L:parseInt(a[2]),A:255*parseFloat(a[3])}},root.W3_HEX=root.W3_HEX24=function(a){return"#"===a.substr(0,1)&&(a=a.substr(1)),3===a.length&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),parseInt("0x"+a)},root.W3_HEX32=function(a){return"#"===a.substr(0,1)&&(a=a.substr(1)),6===a.length?parseInt("0xFF"+a):parseInt("0x"+a)},root.HEX_W3=root.HEX24_W3=function(a,b){b||(b=6),a||(a=0);for(var c=a.toString(16),d=c.length;b>d;)c="0"+c,d++;for(var d=c.length;d>b;)c=c.substr(1),d--;return"#"+c},root.HEX32_W3=function(a){return root.HEX_W3(a,8)},root.HEX_RGB=root.HEX24_RGB=function(a){return{R:a>>16,G:a>>8&255,B:255&a}},root.HEX32_RGBA=function(a){return{R:a>>>16&255,G:a>>>8&255,B:255&a,A:a>>>24}},root.RGBA_HEX32=function(a){return(a.A<<24|a.R<<16|a.G<<8|a.B)>>>0},root.RGB_HEX24=root.RGB_HEX=function(a){return a.R<0&&(a.R=0),a.G<0&&(a.G=0),a.B<0&&(a.B=0),a.R>255&&(a.R=255),a.G>255&&(a.G=255),a.B>255&&(a.B=255),a.R<<16|a.G<<8|a.B},root.RGB_CMY=function(a){return{C:1-a.R/255,M:1-a.G/255,Y:1-a.B/255}},root.RGBA_HSLA=root.RGB_HSL=function(a){var b,c,d=a.R/255,e=a.G/255,f=a.B/255,g=Math.min(d,e,f),h=Math.max(d,e,f),i=h-g,j=(h+g)/2;if(0===i)b=0,c=0;else{c=.5>j?i/(h+g):i/(2-h-g);var k=((h-d)/6+i/2)/i,l=((h-e)/6+i/2)/i,m=((h-f)/6+i/2)/i;d===h?b=m-l:e===h?b=1/3+k-m:f===h&&(b=2/3+l-k),0>b&&(b+=1),b>1&&(b-=1)}return{H:360*b,S:100*c,L:100*j,A:a.A}},root.RGBA_HSVA=root.RGB_HSV=function(a){var b,c,d=a.R/255,e=a.G/255,f=a.B/255,g=Math.min(d,e,f),h=Math.max(d,e,f),i=h-g,j=h;if(0===i)b=0,c=0;else{c=i/h;var k=((h-d)/6+i/2)/i,l=((h-e)/6+i/2)/i,m=((h-f)/6+i/2)/i;d===h?b=m-l:e===h?b=1/3+k-m:f===h&&(b=2/3+l-k),0>b&&(b+=1),b>1&&(b-=1)}return{H:360*b,S:100*c,V:100*j,A:a.A}},root.CMY_RGB=function(a){return{R:Math.max(0,255*(1-a.C)),G:Math.max(0,255*(1-a.M)),B:Math.max(0,255*(1-a.Y))}},root.CMY_CMYK=function(a){var b=a.C,c=a.M,d=a.Y,e=Math.min(d,Math.min(c,Math.min(b,1)));return b=Math.round((b-e)/(1-e)*100),c=Math.round((c-e)/(1-e)*100),d=Math.round((d-e)/(1-e)*100),e=Math.round(100*e),{C:b,M:c,Y:d,K:e}},root.CMYK_CMY=function(a){return{C:a.C*(1-a.K)+a.K,M:a.M*(1-a.K)+a.K,Y:a.Y*(1-a.K)+a.K}},root.HSLA_RGBA=root.HSL_RGB=function(a){var b,c,d,e,f,g,h=a.H/360,i=a.S/100,j=a.L/100;return 0===i?b=c=d=j:(f=.5>j?j*(1+i):j+i-i*j,e=2*j-f,g=h+1/3,0>g&&(g+=1),g>1&&(g-=1),b=1>6*g?e+6*(f-e)*g:1>2*g?f:2>3*g?e+(f-e)*(2/3-g)*6:e,g=h,0>g&&(g+=1),g>1&&(g-=1),c=1>6*g?e+6*(f-e)*g:1>2*g?f:2>3*g?e+(f-e)*(2/3-g)*6:e,g=h-1/3,0>g&&(g+=1),g>1&&(g-=1),d=1>6*g?e+6*(f-e)*g:1>2*g?f:2>3*g?e+(f-e)*(2/3-g)*6:e),{R:255*b,G:255*c,B:255*d,A:a.A}},root.HSVA_RGBA=root.HSV_RGB=function(a){var b,c,d,e,f,g,h=a.H/360,i=a.S/100,j=a.V/100;if(0===i)b=c=d=Math.round(255*j);else switch(h>=1&&(h=0),h=6*h,e=h-Math.floor(h),f=Math.round(255*j*(1-i)),d=Math.round(255*j*(1-i*e)),g=Math.round(255*j*(1-i*(1-e))),j=Math.round(255*j),Math.floor(h)){case 0:b=j,c=g,d=f;break;case 1:b=d,c=j,d=f;break;case 2:b=f,c=j,d=g;break;case 3:b=f,c=d,d=j;break;case 4:b=g,c=f,d=j;break;case 5:b=j,c=f,d=d}return{R:b,G:c,B:d,A:a.A}}}(),define("/opt/eh/plonewebcomponent.midiplayer/src/plonewebcomponent/midiplayer/browser/static/js/MIDI.js/examples/inc/colorspace.js",function(){}),"undefined"==typeof eventjs)var eventjs={};if(function(a){"use strict";a.modifyEventListener=!1,a.modifySelectors=!1,a.add=function(a,b,d,e){return c(a,b,d,e,"add")},a.remove=function(a,b,d,e){return c(a,b,d,e,"remove")},a.returnFalse=function(a){return!1},a.stop=function(a){a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0,a.cancelBubbleCount=0)},a.prevent=function(a){a&&(a.preventDefault?a.preventDefault():a.preventManipulation?a.preventManipulation():a.returnValue=!1)},a.cancel=function(b){a.stop(b),a.prevent(b)},a.blur=function(){var a=document.activeElement;if(a){var b=document.activeElement.nodeName;"INPUT"!==b&&"TEXTAREA"!==b&&"true"!==a.contentEditable||a.blur&&a.blur()}},a.getEventSupport=function(a,b){if("string"==typeof a&&(b=a,a=window),b="on"+b,b in a)return!0;if(a.setAttribute||(a=document.createElement("div")),a.setAttribute&&a.removeAttribute){a.setAttribute(b,"");var c="function"==typeof a[b];return"undefined"!=typeof a[b]&&(a[b]=null),a.removeAttribute(b),c}};var b=function(a){if(!a||"object"!=typeof a)return a;var c=new a.constructor;for(var d in a)a[d]&&"object"==typeof a[d]?c[d]=b(a[d]):c[d]=a[d];return c},c=function(f,g,j,n,o,p){if(n=n||{},"[object Object]"===String(f)){var q=f;if(f=q.target,delete q.target,!q.type||!q.listener){for(var r in q){var s=q[r];"function"!=typeof s&&(n[r]=s)}var t={};for(var u in q){var r=u.split(","),v=q[u],w={};for(var x in n)w[x]=n[x];if("function"==typeof v)var j=v;else{if("function"!=typeof v.listener)continue;var j=v.listener;for(var x in v)"function"!=typeof v[x]&&(w[x]=v[x])}for(var y=0;y<r.length;y++)t[u]=eventjs.add(f,r[y],j,w,o)}return t}g=q.type,delete q.type,j=q.listener,delete q.listener;for(var u in q)n[u]=q[u]}if(f&&g&&j){if("string"==typeof f&&"ready"===g){if(!window.eventjs_stallOnReady){var z=(new Date).getTime(),A=n.timeout,B=n.interval||1e3/60,C=window.setInterval(function(){(new Date).getTime()-z>A&&window.clearInterval(C),document.querySelector(f)&&(window.clearInterval(C),setTimeout(j,1))},B);return}g="load",f=window}if("string"==typeof f){if(f=document.querySelectorAll(f),0===f.length)return e("Missing target on listener!",arguments);1===f.length&&(f=f[0])}var D,E={};if(f.length>0&&f!==window){for(var F=0,G=f.length;G>F;F++)D=c(f[F],g,j,b(n),o),D&&(E[F]=D);return d(E)}if("string"==typeof g&&(g=g.toLowerCase(),-1!==g.indexOf(" ")?g=g.split(" "):-1!==g.indexOf(",")&&(g=g.split(","))),"string"!=typeof g){if("number"==typeof g.length)for(var H=0,I=g.length;I>H;H++)D=c(f,g[H],j,b(n),o),D&&(E[g[H]]=D);else for(var u in g)D="function"==typeof g[u]?c(f,u,g[u],b(n),o):c(f,u,g[u].listener,b(g[u]),o),D&&(E[u]=D);return d(E)}if(0===g.indexOf("on")&&(g=g.substr(2)),"object"!=typeof f)return e("Target is not defined!",arguments);if("function"!=typeof j)return e("Listener is not a function!",arguments);var J=n.useCapture||!1,K=k(f)+"."+k(j)+"."+(J?1:0);if(a.Gesture&&a.Gesture._gestureHandlers[g]){if(K=g+K,"remove"===o){if(!i[K])return;i[K].remove(),delete i[K]}else if("add"===o){if(i[K])return i[K].add(),i[K];if(n.useCall&&!a.modifyEventListener){var L=j;j=function(a,b){for(var c in b)a[c]=b[c];return L.call(f,a)}}n.gesture=g,n.target=f,n.listener=j,n.fromOverwrite=p,i[K]=a.proxy[g](n)}return i[K]}for(var M,N=h(g),y=0;y<N.length;y++)if(g=N[y],M=g+"."+K,"remove"===o){if(!i[M])continue;f[m](g,j,J),delete i[M]}else if("add"===o){if(i[M])return i[M];f[l](g,j,J),i[M]={id:M,type:g,target:f,listener:j,remove:function(){for(var b=0;b<N.length;b++)a.remove(f,N[b],j,n)}}}return i[M]}},d=function(a){return{remove:function(){for(var b in a)a[b].remove()},add:function(){for(var b in a)a[b].add()}}},e=function(a,b){"undefined"!=typeof console&&"undefined"!=typeof console.error&&console.error(a,b)},f={msPointer:["MSPointerDown","MSPointerMove","MSPointerUp"],touch:["touchstart","touchmove","touchend"],mouse:["mousedown","mousemove","mouseup"]},g={MSPointerDown:0,MSPointerMove:1,MSPointerUp:2,touchstart:0,touchmove:1,touchend:2,mousedown:0,mousemove:1,mouseup:2},h=(function(){a.supports={},window.navigator.msPointerEnabled&&(a.supports.msPointer=!0),a.getEventSupport("touchstart")&&(a.supports.touch=!0),a.getEventSupport("mousedown")&&(a.supports.mouse=!0)}(),function(){return function(b){var c=document.addEventListener?"":"on",d=g[b];if(isFinite(d)){var e=[];for(var h in a.supports)e.push(c+f[h][d]);return e}return[c+b]}}()),i={},j=0,k=function(a){return a===window?"#window":a===document?"#document":(a.uniqueID||(a.uniqueID="e"+j++),a.uniqueID)},l=document.addEventListener?"addEventListener":"attachEvent",m=document.removeEventListener?"removeEventListener":"detachEvent";return a.createPointerEvent=function(b,c,d){var e=c.gesture,f=c.target,g=b.changedTouches||a.proxy.getCoords(b);if(g.length){var h=g[0];c.pointers=d?[]:g,c.pageX=h.pageX,c.pageY=h.pageY,c.x=c.pageX,c.y=c.pageY}var i=document.createEvent("Event");i.initEvent(e,!0,!0),i.originalEvent=b;for(var j in c)"target"!==j&&(i[j]=c[j]);var k=i.type;a.Gesture&&a.Gesture._gestureHandlers[k]&&c.oldListener.call(f,i,c,!1)},a.modifyEventListener&&window.HTMLElement&&function(){var b=function(b){var d=function(d){var e=d+"EventListener",f=b[e];b[e]=function(b,e,g){if(a.Gesture&&a.Gesture._gestureHandlers[b]){var i=g;"object"==typeof g?i.useCall=!0:i={useCall:!0,useCapture:g},c(this,b,e,i,d,!0)}else for(var j=h(b),k=0;k<j.length;k++)f.call(this,j[k],e,g)}};d("add"),d("remove")};navigator.userAgent.match(/Firefox/)?(b(HTMLDivElement.prototype),b(HTMLCanvasElement.prototype)):b(HTMLElement.prototype),b(document),b(window)}(),a.modifySelectors&&function(){var a=NodeList.prototype;a.removeEventListener=function(a,b,c){for(var d=0,e=this.length;e>d;d++)this[d].removeEventListener(a,b,c)},a.addEventListener=function(a,b,c){for(var d=0,e=this.length;e>d;d++)this[d].addEventListener(a,b,c)}}(),a}(eventjs),"undefined"==typeof eventjs)var eventjs={};if("undefined"==typeof eventjs.proxy&&(eventjs.proxy={}),eventjs.proxy=function(a){"use strict";a.pointerSetup=function(a,b){a.target=a.target||window,a.doc=a.target.ownerDocument||a.target,a.minFingers=a.minFingers||a.fingers||1,a.maxFingers=a.maxFingers||a.fingers||1/0,a.position=a.position||"relative",delete a.fingers,b=b||{},b.enabled=!0,b.gesture=a.gesture,b.target=a.target,b.env=a.env,eventjs.modifyEventListener&&a.fromOverwrite&&(a.oldListener=a.listener,a.listener=eventjs.createPointerEvent);var c=0,d=0===b.gesture.indexOf("pointer")&&eventjs.modifyEventListener?"pointer":"mouse";return a.oldListener&&(b.oldListener=a.oldListener),b.listener=a.listener,b.proxy=function(c){b.defaultListener=a.listener,a.listener=c,c(a.event,b)},b.add=function(){b.enabled!==!0&&(a.onPointerDown&&eventjs.add(a.target,d+"down",a.onPointerDown),a.onPointerMove&&eventjs.add(a.doc,d+"move",a.onPointerMove),a.onPointerUp&&eventjs.add(a.doc,d+"up",a.onPointerUp),b.enabled=!0)},b.remove=function(){b.enabled!==!1&&(a.onPointerDown&&eventjs.remove(a.target,d+"down",a.onPointerDown),a.onPointerMove&&eventjs.remove(a.doc,d+"move",a.onPointerMove),a.onPointerUp&&eventjs.remove(a.doc,d+"up",a.onPointerUp),b.reset(),b.enabled=!1)},b.pause=function(b){!a.onPointerMove||b&&!b.move||eventjs.remove(a.doc,d+"move",a.onPointerMove),!a.onPointerUp||b&&!b.up||eventjs.remove(a.doc,d+"up",a.onPointerUp),c=a.fingers,a.fingers=0},b.resume=function(b){!a.onPointerMove||b&&!b.move||eventjs.add(a.doc,d+"move",a.onPointerMove),!a.onPointerUp||b&&!b.up||eventjs.add(a.doc,d+"up",a.onPointerUp),a.fingers=c},b.reset=function(){a.tracker={},a.fingers=0},b};var b=eventjs.supports;eventjs.isMouse=!!b.mouse,eventjs.isMSPointer=!!b.touch,eventjs.isTouch=!!b.msPointer,a.pointerStart=function(b,c,d){var e=(b.type||"mousedown").toUpperCase();0===e.indexOf("MOUSE")?(eventjs.isMouse=!0,eventjs.isTouch=!1,eventjs.isMSPointer=!1):0===e.indexOf("TOUCH")?(eventjs.isMouse=!1,eventjs.isTouch=!0,eventjs.isMSPointer=!1):0===e.indexOf("MSPOINTER")&&(eventjs.isMouse=!1,eventjs.isTouch=!1,eventjs.isMSPointer=!0);var f=function(a,b){var c=d.bbox,e=h[b]={};switch(d.position){case"absolute":e.offsetX=0,e.offsetY=0;break;case"differenceFromLast":e.offsetX=a.pageX,e.offsetY=a.pageY;break;case"difference":e.offsetX=a.pageX,e.offsetY=a.pageY;break;case"move":e.offsetX=a.pageX-c.x1,e.offsetY=a.pageY-c.y1;break;default:e.offsetX=c.x1-c.scrollLeft,e.offsetY=c.y1-c.scrollTop}var f=a.pageX-e.offsetX,g=a.pageY-e.offsetY;e.rotation=0,e.scale=1,e.startTime=e.moveTime=(new Date).getTime(),e.move={x:f,y:g},e.start={x:f,y:g},d.fingers++};d.event=b,c.defaultListener&&(d.listener=c.defaultListener,delete c.defaultListener);for(var g=!d.fingers,h=d.tracker,i=b.changedTouches||a.getCoords(b),j=i.length,k=0;j>k;k++){var l=i[k],m=l.identifier||1/0;if(d.fingers){if(d.fingers>=d.maxFingers){var n=[];for(var m in d.tracker)n.push(m);return c.identifier=n.join(","),g}var o=0;for(var p in h){if(h[p].up){delete h[p],f(l,m),d.cancel=!0;break}o++}if(h[m])continue;f(l,m)}else h=d.tracker={},c.bbox=d.bbox=a.getBoundingBox(d.target),d.fingers=0,d.cancel=!1,f(l,m)}var n=[];for(var m in d.tracker)n.push(m);return c.identifier=n.join(","),g},a.pointerEnd=function(a,b,c,d){for(var e=a.touches||[],f=e.length,g={},h=0;f>h;h++){var i=e[h],j=i.identifier;g[j||1/0]=!0}for(var j in c.tracker){var k=c.tracker[j];g[j]||k.up||(d&&d({pageX:k.pageX,pageY:k.pageY,changedTouches:[{pageX:k.pageX,pageY:k.pageY,identifier:"Infinity"===j?1/0:j}]},"up"),k.up=!0,c.fingers--)}if(0!==c.fingers)return!1;var l=[];c.gestureFingers=0;for(var j in c.tracker)c.gestureFingers++,l.push(j);return b.identifier=l.join(","),!0},a.getCoords=function(b){return"undefined"!=typeof b.pageX?a.getCoords=function(a){return Array({type:"mouse",x:a.pageX,y:a.pageY,pageX:a.pageX,pageY:a.pageY,identifier:a.pointerId||1/0})}:a.getCoords=function(a){var b=document.documentElement;return a=a||window.event,Array({type:"mouse",x:a.clientX+b.scrollLeft,y:a.clientY+b.scrollTop,pageX:a.clientX+b.scrollLeft,pageY:a.clientY+b.scrollTop,identifier:1/0})},a.getCoords(b)},a.getCoord=function(b){if("ontouchstart"in window){var c=0,d=0;a.getCoord=function(a){var b=a.changedTouches;return b&&b.length?{x:c=b[0].pageX,y:d=b[0].pageY}:{x:c,y:d}}}else"undefined"!=typeof b.pageX&&"undefined"!=typeof b.pageY?a.getCoord=function(a){return{x:a.pageX,y:a.pageY}}:a.getCoord=function(a){var b=document.documentElement;return a=a||window.event,{x:a.clientX+b.scrollLeft,y:a.clientY+b.scrollTop}};return a.getCoord(b)};var c=function(a,b){var c=parseFloat(a.getPropertyValue(b),10);return isFinite(c)?c:0};return a.getBoundingBox=function(a){a!==window&&a!==document||(a=document.body);var b={},d=a.getBoundingClientRect();b.width=d.width,b.height=d.height,b.x1=d.left,b.y1=d.top,b.scaleX=d.width/a.offsetWidth||1,b.scaleY=d.height/a.offsetHeight||1,b.scrollLeft=0,b.scrollTop=0;var e=window.getComputedStyle(a),f="border-box"===e.getPropertyValue("box-sizing");if(f===!1){var g=c(e,"border-left-width"),h=c(e,"border-right-width"),i=c(e,"border-bottom-width"),j=c(e,"border-top-width");b.border=[g,h,j,i],b.x1+=g,b.y1+=j,b.width-=h+g,b.height-=i+j}b.x2=b.x1+b.width,b.y2=b.y1+b.height;for(var k=e.getPropertyValue("position"),l="fixed"===k?a:a.parentNode;null!==l&&l!==document.body&&void 0!==l.scrollTop;){var e=window.getComputedStyle(l),k=e.getPropertyValue("position");if("absolute"===k);else{if("fixed"===k){b.scrollTop-=l.parentNode.scrollTop,b.scrollLeft-=l.parentNode.scrollLeft;break}b.scrollLeft+=l.scrollLeft,b.scrollTop+=l.scrollTop}l=l.parentNode}return b.scrollBodyLeft=void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,b.scrollBodyTop=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,b.scrollLeft-=b.scrollBodyLeft,b.scrollTop-=b.scrollBodyTop,b},function(){var b,c=navigator.userAgent.toLowerCase(),d=-1!==c.indexOf("macintosh");b=d&&-1!==c.indexOf("khtml")?{91:!0,93:!0}:d&&-1!==c.indexOf("firefox")?{224:!0}:{17:!0},(a.metaTrackerReset=function(){eventjs.fnKey=a.fnKey=!1,eventjs.metaKey=a.metaKey=!1,eventjs.ctrlKey=a.ctrlKey=!1,eventjs.shiftKey=a.shiftKey=!1,eventjs.altKey=a.altKey=!1})(),a.metaTracker=function(c){var d=!!b[c.keyCode];return d&&(eventjs.metaKey=a.metaKey="keydown"===c.type),eventjs.ctrlKey=a.ctrlKey=c.ctrlKey,eventjs.shiftKey=a.shiftKey=c.shiftKey,eventjs.altKey=a.altKey=c.altKey,d}}(),a}(eventjs.proxy),"undefined"==typeof eventjs)var eventjs={};if(eventjs.MutationObserver=function(){var a=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,b=!a&&function(){var a=document.createElement("p"),b=!1,c=function(){b=!0};if(a.addEventListener)a.addEventListener("DOMAttrModified",c,!1);else{if(!a.attachEvent)return!1;a.attachEvent("onDOMAttrModified",c)}return a.setAttribute("id","target"),b}();return function(c,d){if(a){var e={subtree:!1,attributes:!0},f=new a(function(a){a.forEach(function(a){d.call(a.target,a.attributeName)})});f.observe(c,e)}else b?eventjs.add(c,"DOMAttrModified",function(a){d.call(c,a.attrName)}):"onpropertychange"in document.body&&eventjs.add(c,"propertychange",function(a){d.call(c,window.event.propertyName)})}}(),"undefined"==typeof eventjs)var eventjs={};if("undefined"==typeof eventjs.proxy&&(eventjs.proxy={}),eventjs.proxy=function(a){"use strict";return a.click=function(b){b.gesture=b.gesture||"click",b.maxFingers=b.maxFingers||b.fingers||1,b.onPointerDown=function(d){a.pointerStart(d,c,b)&&eventjs.add(b.target,"mouseup",b.onPointerUp)},b.onPointerUp=function(d){if(a.pointerEnd(d,c,b)){eventjs.remove(b.target,"mouseup",b.onPointerUp);var e=d.changedTouches||a.getCoords(d),f=e[0],g=b.bbox,h=a.getBoundingBox(b.target),i=f.pageY-h.scrollBodyTop,j=f.pageX-h.scrollBodyLeft;if(j>g.x1&&i>g.y1&&j<g.x2&&i<g.y2&&g.scrollTop===h.scrollTop){for(var k in b.tracker)break;var l=b.tracker[k];c.x=l.start.x,c.y=l.start.y,b.listener(d,c)}}};var c=a.pointerSetup(b);return c.state="click",eventjs.add(b.target,"mousedown",b.onPointerDown),c},eventjs.Gesture=eventjs.Gesture||{},eventjs.Gesture._gestureHandlers=eventjs.Gesture._gestureHandlers||{},eventjs.Gesture._gestureHandlers.click=a.click,a}(eventjs.proxy),"undefined"==typeof eventjs)var eventjs={};if("undefined"==typeof eventjs.proxy&&(eventjs.proxy={}),eventjs.proxy=function(a){"use strict";return a.dbltap=a.dblclick=function(b){b.gesture=b.gesture||"dbltap",b.maxFingers=b.maxFingers||b.fingers||1;var c,d,e,f,g,h=700;b.onPointerDown=function(j){var k=j.changedTouches||a.getCoords(j);c&&!d?(g=k[0],d=(new Date).getTime()-c):(f=k[0],c=(new Date).getTime(),d=0,clearTimeout(e),e=setTimeout(function(){c=0},h)),a.pointerStart(j,i,b)&&(eventjs.add(b.target,"mousemove",b.onPointerMove).listener(j),eventjs.add(b.target,"mouseup",b.onPointerUp))},b.onPointerMove=function(h){if(c&&!d){var i=h.changedTouches||a.getCoords(h);g=i[0]}var j=b.bbox,k=g.pageX-j.x1,l=g.pageY-j.y1;k>0&&k<j.width&&l>0&&l<j.height&&Math.abs(g.pageX-f.pageX)<=25&&Math.abs(g.pageY-f.pageY)<=25||(eventjs.remove(b.target,"mousemove",b.onPointerMove),clearTimeout(e),c=d=0)},b.onPointerUp=function(f){if(a.pointerEnd(f,i,b)&&(eventjs.remove(b.target,"mousemove",b.onPointerMove),eventjs.remove(b.target,"mouseup",b.onPointerUp)),c&&d){if(h>=d){i.state=b.gesture;for(var g in b.tracker)break;var j=b.tracker[g];i.x=j.start.x,i.y=j.start.y,b.listener(f,i)}clearTimeout(e),c=d=0}};var i=a.pointerSetup(b);return i.state="dblclick",eventjs.add(b.target,"mousedown",b.onPointerDown),i},eventjs.Gesture=eventjs.Gesture||{},eventjs.Gesture._gestureHandlers=eventjs.Gesture._gestureHandlers||{},eventjs.Gesture._gestureHandlers.dbltap=a.dbltap,eventjs.Gesture._gestureHandlers.dblclick=a.dblclick,a}(eventjs.proxy),"undefined"==typeof eventjs)var eventjs={};if("undefined"==typeof eventjs.proxy&&(eventjs.proxy={}),eventjs.proxy=function(a){"use strict";return a.dragElement=function(b,c){a.drag({event:c,target:b,position:"move",listener:function(a,c){b.style.left=c.x+"px",b.style.top=c.y+"px",eventjs.prevent(a)}})},a.drag=function(b){b.gesture="drag",b.onPointerDown=function(d){a.pointerStart(d,c,b)&&(b.monitor||(eventjs.add(b.doc,"mousemove",b.onPointerMove),eventjs.add(b.doc,"mouseup",b.onPointerUp))),b.onPointerMove(d,"down")},b.onPointerMove=function(d,e){if(!b.tracker)return b.onPointerDown(d);for(var f=(b.bbox,d.changedTouches||a.getCoords(d)),g=f.length,h=0;g>h;h++){var i=f[h],j=i.identifier||1/0,k=b.tracker[j];k&&(k.pageX=i.pageX,k.pageY=i.pageY,c.state=e||"move",c.identifier=j,c.start=k.start,c.fingers=b.fingers,"differenceFromLast"===b.position?(c.x=k.pageX-k.offsetX,c.y=k.pageY-k.offsetY,k.offsetX=k.pageX,k.offsetY=k.pageY):(c.x=k.pageX-k.offsetX,c.y=k.pageY-k.offsetY),b.listener(d,c))}},b.onPointerUp=function(d){a.pointerEnd(d,c,b,b.onPointerMove)&&(b.monitor||(eventjs.remove(b.doc,"mousemove",b.onPointerMove),eventjs.remove(b.doc,"mouseup",b.onPointerUp)))};var c=a.pointerSetup(b);return b.event?b.onPointerDown(b.event):(eventjs.add(b.target,"mousedown",b.onPointerDown),b.monitor&&(eventjs.add(b.doc,"mousemove",b.onPointerMove),eventjs.add(b.doc,"mouseup",b.onPointerUp))),c},eventjs.Gesture=eventjs.Gesture||{},eventjs.Gesture._gestureHandlers=eventjs.Gesture._gestureHandlers||{},eventjs.Gesture._gestureHandlers.drag=a.drag,a}(eventjs.proxy),"undefined"==typeof eventjs)var eventjs={};if("undefined"==typeof eventjs.proxy&&(eventjs.proxy={}),eventjs.proxy=function(a){"use strict";var b=Math.PI/180,c=function(a,b){var c=0,d=0,e=0;for(var f in b){var g=b[f];g.up||(c+=g.move.x,d+=g.move.y,e++)}return a.x=c/=e,a.y=d/=e,a};return a.gesture=function(d){d.gesture=d.gesture||"gesture",d.minFingers=d.minFingers||d.fingers||2,d.onPointerDown=function(b){var f=d.fingers;if(a.pointerStart(b,e,d)&&(eventjs.add(d.doc,"mousemove",d.onPointerMove),eventjs.add(d.doc,"mouseup",d.onPointerUp)),d.fingers===d.minFingers&&f!==d.fingers){e.fingers=d.minFingers,e.scale=1,e.rotation=0,e.state="start";var g="";for(var h in d.tracker)g+=h;e.identifier=parseInt(g),c(e,d.tracker),d.listener(b,e)}},d.onPointerMove=function(f,g){for(var h=d.bbox,i=d.tracker,j=f.changedTouches||a.getCoords(f),k=j.length,l=0;k>l;l++){var m=j[l],n=m.identifier||1/0,o=i[n];o&&(o.move.x=m.pageX-h.x1,o.move.y=m.pageY-h.y1)}if(!(d.fingers<d.minFingers)){var j=[],p=0,q=0;c(e,i);for(var n in i){var m=i[n];if(!m.up){var r=m.start;if(!r.distance){var s=r.x-e.x,t=r.y-e.y;r.distance=Math.sqrt(s*s+t*t),r.angle=Math.atan2(s,t)/b}var s=m.move.x-e.x,t=m.move.y-e.y,u=Math.sqrt(s*s+t*t);p+=u/r.distance;var v=Math.atan2(s,t)/b,w=(r.angle-v+360)%360-180;m.DEG2=m.DEG1,m.DEG1=w>0?w:-w,"undefined"!=typeof m.DEG2&&(w>0?m.rotation+=m.DEG1-m.DEG2:m.rotation-=m.DEG1-m.DEG2,q+=m.rotation),j.push(m.move)}}e.touches=j,e.fingers=d.fingers,e.scale=p/d.fingers,e.rotation=q/d.fingers,e.state="change",d.listener(f,e)}},d.onPointerUp=function(b){var c=d.fingers;a.pointerEnd(b,e,d)&&(eventjs.remove(d.doc,"mousemove",d.onPointerMove),eventjs.remove(d.doc,"mouseup",d.onPointerUp)),c===d.minFingers&&d.fingers<d.minFingers&&(e.fingers=d.fingers,e.state="end",d.listener(b,e))};var e=a.pointerSetup(d);return eventjs.add(d.target,"mousedown",d.onPointerDown),e},eventjs.Gesture=eventjs.Gesture||{},eventjs.Gesture._gestureHandlers=eventjs.Gesture._gestureHandlers||{},eventjs.Gesture._gestureHandlers.gesture=a.gesture,a}(eventjs.proxy),"undefined"==typeof eventjs)var eventjs={};if("undefined"==typeof eventjs.proxy&&(eventjs.proxy={}),eventjs.proxy=function(a){"use strict";return a.pointerdown=a.pointermove=a.pointerup=function(b){if(b.gesture=b.gesture||"pointer",!b.target.isPointerEmitter){var c=!0;b.onPointerDown=function(a){c=!1,d.gesture="pointerdown",b.listener(a,d)},b.onPointerMove=function(a){d.gesture="pointermove",b.listener(a,d,c)},b.onPointerUp=function(a){c=!0,d.gesture="pointerup",b.listener(a,d,!0)};var d=a.pointerSetup(b);return eventjs.add(b.target,"mousedown",b.onPointerDown),eventjs.add(b.target,"mousemove",b.onPointerMove),eventjs.add(b.doc,"mouseup",b.onPointerUp),b.target.isPointerEmitter=!0,d}},eventjs.Gesture=eventjs.Gesture||{},eventjs.Gesture._gestureHandlers=eventjs.Gesture._gestureHandlers||{},eventjs.Gesture._gestureHandlers.pointerdown=a.pointerdown,eventjs.Gesture._gestureHandlers.pointermove=a.pointermove,eventjs.Gesture._gestureHandlers.pointerup=a.pointerup,a}(eventjs.proxy),"undefined"==typeof eventjs)var eventjs={};if("undefined"==typeof eventjs.proxy&&(eventjs.proxy={}),eventjs.proxy=function(a){"use strict";
return a.shake=function(a){var b={gesture:"devicemotion",acceleration:{},accelerationIncludingGravity:{},target:a.target,listener:a.listener,remove:function(){window.removeEventListener("devicemotion",j,!1)}},c=4,d=1e3,e=200,f=3,g=(new Date).getTime(),h={x:0,y:0,z:0},i={x:{count:0,value:0},y:{count:0,value:0},z:{count:0,value:0}},j=function(j){var k=.8,l=j.accelerationIncludingGravity;if(h.x=k*h.x+(1-k)*l.x,h.y=k*h.y+(1-k)*l.y,h.z=k*h.z+(1-k)*l.z,b.accelerationIncludingGravity=h,b.acceleration.x=l.x-h.x,b.acceleration.y=l.y-h.y,b.acceleration.z=l.z-h.z,"devicemotion"===a.gesture)return void a.listener(j,b);for(var m="xyz",n=(new Date).getTime(),o=0,p=m.length;p>o;o++){var q=m[o],r=b.acceleration[q],s=i[q],t=Math.abs(r);if(!(d>n-g)&&t>c){var u=n*r/t,v=Math.abs(u+s.value);s.value&&e>v?(s.value=u,s.count++,s.count===f&&(a.listener(j,b),g=n,s.value=0,s.count=0)):(s.value=u,s.count=1)}}};return window.addEventListener?(window.addEventListener("devicemotion",j,!1),b):void 0},eventjs.Gesture=eventjs.Gesture||{},eventjs.Gesture._gestureHandlers=eventjs.Gesture._gestureHandlers||{},eventjs.Gesture._gestureHandlers.shake=a.shake,a}(eventjs.proxy),"undefined"==typeof eventjs)var eventjs={};if("undefined"==typeof eventjs.proxy&&(eventjs.proxy={}),eventjs.proxy=function(a){"use strict";var b=Math.PI/180;return a.swipe=function(c){c.snap=c.snap||90,c.threshold=c.threshold||1,c.gesture=c.gesture||"swipe",c.onPointerDown=function(b){a.pointerStart(b,d,c)&&(eventjs.add(c.doc,"mousemove",c.onPointerMove).listener(b),eventjs.add(c.doc,"mouseup",c.onPointerUp))},c.onPointerMove=function(b){for(var d=b.changedTouches||a.getCoords(b),e=d.length,f=0;e>f;f++){var g=d[f],h=g.identifier||1/0,i=c.tracker[h];i&&(i.move.x=g.pageX,i.move.y=g.pageY,i.moveTime=(new Date).getTime())}},c.onPointerUp=function(e){if(a.pointerEnd(e,d,c)){eventjs.remove(c.doc,"mousemove",c.onPointerMove),eventjs.remove(c.doc,"mouseup",c.onPointerUp);var f,g,h,i,j={x:0,y:0},k=0,l=0,m=0;for(var n in c.tracker){var o=c.tracker[n],p=o.move.x-o.start.x,q=o.move.y-o.start.y;k+=o.move.x,l+=o.move.y,j.x+=o.start.x,j.y+=o.start.y,m++;var r=Math.sqrt(p*p+q*q),s=o.moveTime-o.startTime,i=Math.atan2(p,q)/b+180,g=s?r/s:0;if("undefined"==typeof h)h=i,f=g;else{if(!(Math.abs(i-h)<=20))return;h=(h+i)/2,f=(f+g)/2}}var t=c.gestureFingers;c.minFingers<=t&&c.maxFingers>=t&&f>c.threshold&&(j.x/=m,j.y/=m,d.start=j,d.x=k/m,d.y=l/m,d.angle=-(((h/c.snap+.5>>0)*c.snap||360)-360),d.velocity=f,d.fingers=t,d.state="swipe",c.listener(e,d))}};var d=a.pointerSetup(c);return eventjs.add(c.target,"mousedown",c.onPointerDown),d},eventjs.Gesture=eventjs.Gesture||{},eventjs.Gesture._gestureHandlers=eventjs.Gesture._gestureHandlers||{},eventjs.Gesture._gestureHandlers.swipe=a.swipe,a}(eventjs.proxy),"undefined"==typeof eventjs)var eventjs={};if("undefined"==typeof eventjs.proxy&&(eventjs.proxy={}),eventjs.proxy=function(a){"use strict";return a.longpress=function(b){return b.gesture="longpress",a.tap(b)},a.tap=function(b){b.delay=b.delay||500,b.timeout=b.timeout||250,b.driftDeviance=b.driftDeviance||10,b.gesture=b.gesture||"tap";var c,d;b.onPointerDown=function(f){if(a.pointerStart(f,e,b)){if(c=(new Date).getTime(),eventjs.add(b.doc,"mousemove",b.onPointerMove).listener(f),eventjs.add(b.doc,"mouseup",b.onPointerUp),"longpress"!==b.gesture)return;d=setTimeout(function(){if(!(f.cancelBubble&&++f.cancelBubbleCount>1)){var a=0;for(var c in b.tracker){var d=b.tracker[c];if(d.end===!0)return;if(b.cancel)return;a++}b.minFingers<=a&&b.maxFingers>=a&&(e.state="start",e.fingers=a,e.x=d.start.x,e.y=d.start.y,b.listener(f,e))}},b.delay)}},b.onPointerMove=function(c){for(var d=b.bbox,e=c.changedTouches||a.getCoords(c),f=e.length,g=0;f>g;g++){var h=e[g],i=h.identifier||1/0,j=b.tracker[i];if(j){var k=h.pageX-d.x1,l=h.pageY-d.y1,m=k-j.start.x,n=l-j.start.y,o=Math.sqrt(m*m+n*n);if(!(k>0&&k<d.width&&l>0&&l<d.height&&o<=b.driftDeviance))return eventjs.remove(b.doc,"mousemove",b.onPointerMove),void(b.cancel=!0)}}},b.onPointerUp=function(f){if(a.pointerEnd(f,e,b)){if(clearTimeout(d),eventjs.remove(b.doc,"mousemove",b.onPointerMove),eventjs.remove(b.doc,"mouseup",b.onPointerUp),f.cancelBubble&&++f.cancelBubbleCount>1)return;if("longpress"===b.gesture)return void("start"===e.state&&(e.state="end",b.listener(f,e)));if(b.cancel)return;if((new Date).getTime()-c>b.timeout)return;var g=b.gestureFingers;b.minFingers<=g&&b.maxFingers>=g&&(e.state="tap",e.fingers=b.gestureFingers,b.listener(f,e))}};var e=a.pointerSetup(b);return eventjs.add(b.target,"mousedown",b.onPointerDown),e},eventjs.Gesture=eventjs.Gesture||{},eventjs.Gesture._gestureHandlers=eventjs.Gesture._gestureHandlers||{},eventjs.Gesture._gestureHandlers.tap=a.tap,eventjs.Gesture._gestureHandlers.longpress=a.longpress,a}(eventjs.proxy),"undefined"==typeof eventjs)var eventjs={};"undefined"==typeof eventjs.proxy&&(eventjs.proxy={}),eventjs.proxy=function(a){"use strict";return a.wheelPreventElasticBounce=function(a){a&&("string"==typeof a&&(a=document.querySelector(a)),eventjs.add(a,"wheel",function(a,b){b.preventElasticBounce(),eventjs.stop(a)}))},a.wheel=function(a){var b,c=a.timeout||150,d=0,e={gesture:"wheel",state:"start",wheelDelta:0,target:a.target,listener:a.listener,preventElasticBounce:function(a){var b=this.target,c=b.scrollTop,d=c+b.offsetHeight,e=b.scrollHeight;d===e&&this.wheelDelta<=0?eventjs.cancel(a):0===c&&this.wheelDelta>=0&&eventjs.cancel(a),eventjs.stop(a)},add:function(){a.target[g](i,f,!1)},remove:function(){a.target[h](i,f,!1)}},f=function(f){f=f||window.event,e.state=d++?"change":"start",e.wheelDelta=f.detail?-20*f.detail:f.wheelDelta,a.listener(f,e),clearTimeout(b),b=setTimeout(function(){d=0,e.state="end",e.wheelDelta=0,a.listener(f,e)},c)},g=document.addEventListener?"addEventListener":"attachEvent",h=document.removeEventListener?"removeEventListener":"detachEvent",i=eventjs.getEventSupport("mousewheel")?"mousewheel":"DOMMouseScroll";return a.target[g](i,f,!1),e},eventjs.Gesture=eventjs.Gesture||{},eventjs.Gesture._gestureHandlers=eventjs.Gesture._gestureHandlers||{},eventjs.Gesture._gestureHandlers.wheel=a.wheel,a}(eventjs.proxy);var addEvent=eventjs.add,removeEvent=eventjs.remove;!function(){for(var a in eventjs)Event[a]=eventjs[a];for(var a in eventjs.proxy)addEvent[a]=eventjs.proxy[a]}(),define("/opt/eh/plonewebcomponent.midiplayer/src/plonewebcomponent/midiplayer/browser/static/js/MIDI.js/examples/inc/event.js",function(){});
//# sourceMappingURL=midi-player-compiled.js.map